!function(){"use strict";async function e(e,i){const t=await fetch(e,{headers:{"Content-Type":"application/json","X-API-KEY":"84S4SNX-Y084WMK-K7FV73W-8G8P6MH"}}),s=await t.json();console.log(s),"search"==i?function(e){const i=document.querySelector(".films");i.innerHTML="";let t=-1;e.docs.forEach((function(e){if(null==e.poster||null==e.poster.url||null==e.name||0==e.genres.length||!e.genres)return void t++;t++;const s=document.createElement("div");var n;s.classList.add("film"),s.innerHTML=`\n            <button data-id="${t}" class="movie__cover-inner">\n            <img src="${e.poster.url}" alt="${e.name}" class="movie__cover">\n            <div class="movie__cover--darkened"></div>\n        </button>\n        <div class="movie__info">\n            <div class="movie__title">${e.name}</div>\n            <div class="movie__category">${e.genres.map((e=>` ${e.name}`))}</div>\n            <a class="movie__link" href="https://www.ggkinopoisk.ru/film/${e.id}/" target='_blank'>Смотреть бесплатно</a>\n            <div class="movie__average movie__average--${n=e.rating.imdb,n>=8?"green":n>=5?"orange":"red"}">${e.rating.imdb}</div>\n        </div>\n            `,i.appendChild(s)}));const s=document.querySelectorAll(".pagination__btn");e.page<4?s.forEach((i=>{switch(i.dataset.num){case"1":i.innerHTML=1;break;case"2":i.innerHTML=2;break;case"3":i.innerHTML=3;break;case"4":i.innerHTML=4;break;case"5":i.innerHTML=5}i.textContent==e.page&&(document.querySelector(".page-active").classList.remove("page-active"),i.classList.add("page-active"))})):s.forEach((i=>{switch(i.dataset.num){case"1":i.innerHTML=1;break;case"2":i.innerHTML=e.page-1;break;case"3":i.innerHTML=e.page;break;case"4":i.innerHTML=e.page+1;break;case"5":i.innerHTML=e.page+2}i.textContent==e.page&&(document.querySelector(".page-active").classList.remove("page-active"),i.classList.add("page-active"))})),function(e){document.querySelectorAll(".movie__cover-inner").forEach((i=>{i.addEventListener("click",(t=>{t.preventDefault(),function(e){const i=document.querySelector(".popup");i.classList.add("popup--open"),document.body.classList.add("no-scroll"),i.innerHTML="";let t="";e.genres.forEach((e=>t+=`${e.name}, `)),t=t.slice(0,-2);let s="";e.countries.forEach((e=>s+=`${e.name}, `)),s=s.slice(0,-2);let n="";if(e.persons.length>0){for(let i=0;i<3;i++)n+=`${e.persons[i].name}, `;n=n.slice(0,-2)}let l="";l=e.videos&&e.videos.trailers.length>0?`<iframe allowfullscreen class="film__trailer"src="${e.videos.trailers[0].url}"></iframe>`:`<img class="film__trailer" src="${e.poster.url}" alt="poster">`;let a="";null!=e.movieLength&&(a=`${e.movieLength.toString()} мин.`);let c="";c=null!=e.description&&e.description?e.description:"",i.innerHTML=`\n  <div class="popup__body">\n    <div class="popup__header">\n      <div class="popup__title"><h2 class="title-2">${e.name}</h2></div>\n      <button class="popup__close"><i class="fa-solid fa-xmark"></i></button>\n    </div>\n    <div class="popup__content">\n      ${l}\n      <div class="film__info">\n        <div class="film__watch"></div>\n        <div class="film__genre">${t}</div>\n        <div class="film__countries">${s}</div>\n        <div class="film__year">${e.year}</div>\n        <div class="film__length">${a}</div>\n        <div class="film__actors">${n}</div>\n        <div class="film__description">${c}</div>\n      </div>\n    </div>\n  </div>`;const o=[],r=[];if(e.watchability&&null!=e.watchability.items){for(let i=0;i<e.watchability.items.length;i++)r[i]=e.watchability.items[i].logo.url,o[i]=e.watchability.items[i].url;document.querySelector(".film__watch").innerHTML='\n    <h3 class="title-3">Можно посмотреть</h2>\n    <ul class="film__cinema"></ul>';const i=document.querySelector(".film__cinema");i.innerHTML="";for(let e=0;e<o.length;e++)i.innerHTML+=`<li class="film__cinema--item"><a class="film__link" href="${o[e]}" target="_blank"><img class="film__link--img" src="${r[e]}"></a></li>`}window.addEventListener("click",(e=>{const t=e.target;(!t.closest(".popup__body")&&t.closest(".popup")||t.closest(".popup__close"))&&(e.preventDefault(),i.classList.remove("popup--open"),document.body.classList.remove("no-scroll"),i.innerHTML="")}))}(e[i.dataset.id])}))}))}(e.docs)}(s):function(e){const i=document.getElementById("popular-img"),t=document.getElementById("popular-link");i.src=e.docs[0].poster.url,null!=e.docs[0].watchability.items&&(t.href=e.docs[0].watchability.items[0].url)}(s)}e("https://api.kinopoisk.dev/v1.3/movie?page=1&limit=10&top10=1","popular");const i=document.querySelector(".form"),t=document.querySelector(".form__input"),s=document.querySelector(".search-result");i.addEventListener("submit",(i=>{i.preventDefault();const n=`https://api.kinopoisk.dev/v1.3/movie?selectFields=name&selectFields=videos.trailers.url&selectFields=description&selectFields=poster&selectFields=movieLength&selectFields=persons.name&selectFields=rating&selectFields=watchability&selectFields=year&selectFields=genres&selectFields=id&selectFields=countries.name&page=1&limit=30&name=${t.value}`;t.value&&(s.scrollIntoView(!0),e(n,"search"),t.value="")}));const n=document.querySelector(".btn-search"),l=document.querySelector(".form__submit");n.addEventListener("click",(function(){t.classList.toggle("active"),l.classList.toggle("active"),t.classList.contains("active")?t.focus():t.blur()}))}();