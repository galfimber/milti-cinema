!function(){"use strict";const e="https://api.kinopoisk.dev/v1.3/movie?";async function a(e){const a=await fetch(e,{headers:{"Content-Type":"application/json","X-API-KEY":"84S4SNX-Y084WMK-K7FV73W-8G8P6MH"}}),n=await a.json();console.log(n),function(e){const a=document.querySelector(".films");a.innerHTML="",e.docs.forEach((e=>{const n=document.createElement("div");let t;var i;e.watchability.items.forEach((e=>{e.name,t=e.url})),n.classList.add("film"),n.innerHTML=`\n          <a href="${t}" target="_blank" class="movie__cover-inner">\n          <img src="${e.poster.url}" alt="${e.name}" class="movie__cover">\n          <div class="movie__cover--darkened"></div>\n      </a>\n      <div class="movie__info">\n          <div class="movie__title">${e.name}</div>\n          <div class="movie__category">${e.genres.map((e=>` ${e.name}`))}</div>\n          <a class="movie__link" href="https://www.ggkinopoisk.ru/film/${e.id}/" target=_blank>Смотреть бесплатно</a>\n          <div class="movie__average movie__average--${i=e.rating.imdb,i>=8?"green":i>=5?"orange":"red"}">${e.rating.imdb}</div>\n      </div>\n          `,a.appendChild(n)}));const n=document.querySelectorAll(".pagination__btn");e.page<4?n.forEach((a=>{switch(a.dataset.num){case"1":a.innerHTML=1;break;case"2":a.innerHTML=2;break;case"3":a.innerHTML=3;break;case"4":a.innerHTML=4;break;case"5":a.innerHTML=5}a.textContent==e.page&&(document.querySelector(".page-active").classList.remove("page-active"),a.classList.add("page-active"))})):n.forEach((a=>{switch(a.dataset.num){case"1":a.innerHTML=1;break;case"2":a.innerHTML=e.page-1;break;case"3":a.innerHTML=e.page;break;case"4":a.innerHTML=e.page+1;break;case"5":a.innerHTML=e.page+2}a.textContent==e.page&&(document.querySelector(".page-active").classList.remove("page-active"),a.classList.add("page-active"))}))}(n)}let n;const t=document.querySelectorAll(".genre__title"),i=document.querySelector(".pages");t.forEach((t=>{t.addEventListener("click",(c=>{n=t.dataset.genre;const s=`${e}page=1&limit=30&genres.name=${encodeURIComponent(n)}`;i.classList.add("pages--visible"),a(s)}))})),document.querySelectorAll(".pagination__btn").forEach((t=>{t.addEventListener("click",(i=>{a(`${e}page=${t.textContent}&limit=30&genres.name=${encodeURIComponent(n)}`)}))}))}();